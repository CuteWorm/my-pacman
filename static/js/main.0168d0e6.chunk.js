(this["webpackJsonpmy-pacman"]=this["webpackJsonpmy-pacman"]||[]).push([[0],{139:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(20),s=a.n(o),r=(a(45),a(3)),l=a(4),c=a(5),h=a(6),p=a(14),u=a.n(p),m={apiKey:"AIzaSyBhXQEbOkrVpJijCLyy_b-Z3Rv9VvbbAKA",authDomain:"first-eb7b0.firebaseapp.com",databaseURL:"https://first-eb7b0.firebaseio.com",projectId:"first-eb7b0",storageBucket:"first-eb7b0.appspot.com",messagingSenderId:"758078057766",appId:"1:758078057766:web:55fdb1ac8ced8d8a86e5e7",measurementId:"G-2TB27Z7KSB"},d="## Game play and rules\nYou, as the Pacman will try to eat all the food and to not collide with four ghosts. If the Pacman hits any of the ghosts, you'll lose. Each food you eat, giving you a point. When the Pacman eats the whole food on the ground, you'll win. There is a gift rewarding for the No.1.\n### Rules to receive **Gifts**\n- You are the No.1 at 1:00PM\n- Then you inbox me your **Random Secret**\n- **Note**: *don't try to **Improve your score** if you are the No.1 already. If you wanna create a new player, refresh the browser page*.\n### Control the Pacman\n- Just simple as using keyboard arrows **Up, Down, Left, Right** to change Pacman's direction\n- In case of using mobile devices, please use the **Controller Box** at the right bottom corner of the scene",f="## C\xe1ch ch\u01a1i\nB\u1ea1n trong vai Pacman (c\xe1i m\u1ecf m\xe0u v\xe0ng) c\u1ed1 g\u1eafng \u0111\u1ec3 \u0103n th\u1eadt nhi\u1ec1u nh\u1eefng h\u1ea1t m\xe0u v\xe0ng nh\u1ecf, v\xe0 \u0111\u1eebng ch\u1ea1m v\xe0o nh\u1eefng con ma \u0111\u1ee7 m\xe0u s\u1eafc. N\u1ebfu ch\u1ea1m ma, b\u1ea1n thua. M\u1ed7i h\u1ea1t m\xe0u v\xe0ng t\u01b0\u01a1ng \u1ee9ng 1 \u0111i\u1ec3m. Khi \u0103n h\u1ebft nh\u1eefng h\u1ea1t m\xe0u v\xe0ng th\xec b\u1ea1n th\u1eafng. S\u1ebd c\xf3 ph\u1ea7n th\u01b0\u1edfng cho ng\u01b0\u1eddi \u1edf v\u1ecb tr\xed d\u1eabn \u0111\u1ea7u.\n### L\xe0m sao \u0111\u1ec3 nh\u1eadn **Qu\xe0**\n- B\u1ea1n \u1edf v\u1ecb tr\xed Top 1 ngay th\u1eddi \u0111i\u1ec3m 1:00 gi\u1edd tr\u01b0a.\n- Sau \u0111\xf3 b\u1ea1n ch\xe1t ri\xeang v\u1edbi t\xf4i \u0111\u1ec3 cung c\u1ea5p **Random Secret** (d\xe3y k\xed t\u1ef1 b\xed m\u1eadt b\u1ea1n \u0111\u0103ng k\xfd khi v\xe0o tr\xf2 ch\u01a1i)\n- **L\u01b0u \xfd**: *\u0111\u1eebng c\u1ed1 ch\u01a1i l\u1ea1i (**Improve your score**) n\u1ebfu b\u1ea1n \u0111\xe3 l\xe0 Top 1. N\u1ebfu mu\u1ed1n ch\u01a1i v\u1edbi 1 player m\u1edbi, t\u1ea1o 1 tab kh\xe1c tr\xean tr\xecnh duy\u1ec7t*.\n### \u0110i\u1ec1u khi\u1ec3n Pacman\n- D\xf9ng c\xe1c ph\xedm **Up, Down, Left, Right** tr\xean b\xe0n ph\xedm \u0111\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng.\n- N\u1ebfu ch\u01a1i b\u1eb1ng Tablets, Phones b\u1ea1n c\xf3 th\u1ec3 d\u1ee5ng **Ph\xedm \u0111i\u1ec1u khi\u1ec3n** g\xf3c d\u01b0\u1edbi ph\u1ea3i c\u1ee7a m\xe0n h\xecnh.",v=a(29),g=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFormSubmit=function(e){e.preventDefault(),n.state.playerName&&n.props.startGame({playerName:n.state.playerName,secret:n.state.secret})},n.handleTVCheckboxChange=function(e){return n.setState({tvChecked:e.target.checked})},n.state={playerName:"",secret:"",tvChecked:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"registerModal",className:"modal-content "+(this.props.display?"":" hide ")},i.a.createElement("div",{className:"ui toggle checkbox language"},i.a.createElement("input",{type:"checkbox",name:"language",checked:this.state.tvChecked,onChange:this.handleTVCheckboxChange}),i.a.createElement("label",null,"Ti\u1ebfng Vi\u1ec7t")),i.a.createElement(v,{source:this.state.tvChecked?f:d}),i.a.createElement("h2",{className:"ui header"},"Register"),i.a.createElement("form",{onSubmit:this.onFormSubmit,className:"ui form "},i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui input"},i.a.createElement("input",{type:"text",placeholder:"You name...",value:this.state.playerName,onChange:function(t){return e.setState({playerName:t.target.value})}}))),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"ui input"},i.a.createElement("input",{type:"text",placeholder:"Random secret...",value:this.state.secret,onChange:function(t){return e.setState({secret:t.target.value})}}))),i.a.createElement("button",{className:"ui button primary save-btn",onClick:this.savePlayerName},"Play"))),i.a.createElement("div",{className:"modal-overlay"+(this.props.display?" ":" hide ")}))}}]),a}(i.a.Component);g.defaultProps={display:!0};var y=g,b=a(29),k=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"showHideHelp",value:function(e){this.props.showHideHelp(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"leftPanel",className:"column five wide"},i.a.createElement("div",{class:"box"},i.a.createElement("div",{class:"row header"},i.a.createElement("div",{className:"ui huge header center aligned"},"PACMAN")),i.a.createElement("div",{class:"row content"},this.props.children),i.a.createElement("div",{class:"row footer"},i.a.createElement("div",{className:"author"},i.a.createElement("div",{class:"ui label"},i.a.createElement("i",{class:"hand peace icon"}),"Bui Tran Thanh Nam")," ",i.a.createElement("br",null),i.a.createElement("div",{class:"ui label"},i.a.createElement("a",{href:"mailto:namnamit89@gmail.com"},i.a.createElement("i",{class:"mail icon"}),"Namnamit89@gmail.com")),i.a.createElement("div",{class:"ui label"},i.a.createElement("a",{href:"https://github.com/CuteWorm/my-pacman",target:"_blank"},i.a.createElement("i",{class:"github icon"}),"https://github.com/CuteWorm/my-pacman"))),i.a.createElement("div",{className:"tags",style:{marginTop:"1em"}},i.a.createElement("span",null,"Tags: "),i.a.createElement("div",{class:"ui label"},"Javascript"),i.a.createElement("div",{class:"ui label"},"ReacJs"),i.a.createElement("div",{class:"ui label"},"Firebase"),i.a.createElement("div",{class:"ui label"},"Realtime"),i.a.createElement("div",{class:"ui label"},"Pacman"),i.a.createElement("div",{class:"ui label"},"Live score")),i.a.createElement("div",{id:"btnHelp",class:"ui"},i.a.createElement("a",{href:"#",onClick:function(){return e.showHideHelp(!1)},title:"How to play?"},i.a.createElement("i",{class:"question circle icon"})),i.a.createElement("div",{id:"howTo"},i.a.createElement(b,{source:d}))))))}}]),a}(i.a.Component);k.defaultProps={points:0,playing:!0};var E=k;a(139);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var O=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{className:"svg",d:"M532.3,156.5c-83.6,41.4-167.1,82.7-251.4,124.4c84.1,42.2,167.3,84,250.5,125.9c-48.3,100.6-165.6,172-294.4,151.5 C98.2,536.2,0.3,417,0,281.5C-0.3,149.8,92.2,30.8,228.9,4.9C360.6-19.9,482,51.6,532.3,156.5z M328.5,159.6 c21-0.1,37.9-16.4,37.9-36.5s-16.9-36.4-37.9-36.5c-21.2-0.1-38.3,16.4-38.1,36.7C290.5,143.5,307.6,159.7,328.5,159.6z"}),i.a.createElement("path",{d:"M328.5,159.6c-21,0.1-38-16.1-38.1-36.3c-0.1-20.3,17-36.8,38.1-36.7c21,0.1,37.9,16.4,37.9,36.5S349.5,159.5,328.5,159.6 z"}))),R=function(e){var t=e.svgRef,a=e.title,n=S(e,["svgRef","title"]);return i.a.createElement("svg",w({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 532.3 561.9",style:{enableBackground:"new 0 0 532.3 561.9"},xmlSpace:"preserve",ref:t},n),a?i.a.createElement("title",null,a):null,O)},C=i.a.forwardRef((function(e,t){return i.a.createElement(R,w({svgRef:t},e))})),N=(a.p,function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={position:n.props.position,death:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.moveInterval=setInterval(this.move.bind(this),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.moveInterval)}},{key:"move",value:function(){var e=this.state.position.left,t=this.state.position.top;if("right"===this.props.direction){var a=this.props.sceneWidth-e-this.props.pacmanSize,n=Math.min(this.props.velocity,a);this.setStateWhilePlaying({position:{left:e+n,top:t}})}if("left"===this.props.direction){var i=e;n=Math.min(this.props.velocity,i),this.setStateWhilePlaying({position:{left:e-n,top:t}})}if("down"===this.props.direction){var o=this.props.sceneHeight-t-this.props.pacmanSize;n=Math.min(this.props.velocity,o),this.setStateWhilePlaying({position:{top:t+n,left:e}})}if("up"===this.props.direction){var s=t;n=Math.min(this.props.velocity,s),this.setStateWhilePlaying({position:{top:t-n,left:e}})}n||this.props.randomDirection()}},{key:"killed",value:function(){this.setStateWhilePlaying({death:!0}),clearInterval(this.moveInterval)}},{key:"setStateWhilePlaying",value:function(e){this.props.playing&&this.setState(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"pacman "+this.props.direction+(this.state.death?" death ":""),style:this.state.position},i.a.createElement(C,null))}}]),a}(i.a.Component));N.defaultProps={sceneWidth:400,sceneHeight:400,pacmanSize:60,velocity:20,direction:"right"};var j=N;a(140);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var M=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{className:"svg",d:"M128.1,129.7c-4.9-4.5-8.8-8.1-12.8-11.8c-3.4,3.7-6.7,7.3-10.3,11.3c-3.4-3.7-6.8-7.4-10.3-11.2 c-3.5,3.8-6.7,7.3-10.3,11.2c-3.5-3.7-6.8-7.2-10.4-11.1c-3.3,3.6-6.5,6.9-10,10.7c-3.3-3.6-6.4-7-9.8-10.7 c-3.5,3.7-6.8,7.3-10.6,11.4c-3.5-3.8-6.8-7.4-10.4-11.4c-3.5,3.7-6.8,7.3-10.6,11.4c-3.5-3.8-6.8-7.4-11.2-12.3 c-3.4,4.3-6.7,8.4-10,12.5c-0.5-0.3-0.9-0.6-1.4-0.9c0-2.1,0-4.2,0-6.3c0.2-21.7-0.2-43.3,0.7-65C2.1,23.9,33.4-3.7,71.6,0.4 c28.4,3,49.7,21.7,55.8,47.6c0.9,4,1.5,8.2,1.5,12.3c0.2,20.5,0.1,41,0.1,61.5C128.8,124,128.4,126.2,128.1,129.7z M39.1,67.2 c6.4-0.1,11.3-5.3,11.2-11.7c-0.1-6.4-5.3-11.3-11.7-11.2c-6.4,0.1-11.3,5.2-11.2,11.6C27.6,62.4,32.7,67.3,39.1,67.2z  M100.3,55.8c0-6.4-5-11.4-11.4-11.4c-6.4,0-11.4,5-11.4,11.4s5,11.4,11.4,11.4C95.2,67.2,100.3,62.2,100.3,55.8z"}))),I=function(e){var t=e.svgRef,a=e.title,n=P(e,["svgRef","title"]);return i.a.createElement("svg",D({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 129 129.7",style:{enableBackground:"new 0 0 129 129.7"},xmlSpace:"preserve",ref:t},n),a?i.a.createElement("title",null,a):null,M)},W=i.a.forwardRef((function(e,t){return i.a.createElement(I,D({svgRef:t},e))})),z=(a.p,a(38)),H=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={position:n.props.position,direction:n.props.direction,color:n.props.color,death:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.moveInterval=setInterval(this.move.bind(this),z.isMobile?200:120),this.changeDirectionInterval=setInterval(this.changeDirection.bind(this),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.moveInterval),clearInterval(this.changeDirectionInterval)}},{key:"changeDirection",value:function(){var e=["left","right","up","down"][Math.floor(4*Math.random())];this.setStateWhilePlaying({direction:e})}},{key:"move",value:function(){var e=this.state.position.left,t=this.state.position.top;if("right"===this.state.direction){var a=this.props.sceneWidth-e-this.props.ghostSize,n=Math.min(this.props.velocity,a);this.setStateWhilePlaying({position:{left:e+n,top:t}})}if("left"===this.state.direction){var i=e;n=Math.min(this.props.velocity,i),this.setStateWhilePlaying({position:{left:e-n,top:t}})}if("down"===this.state.direction){var o=this.props.sceneHeight-t-this.props.ghostSize;n=Math.min(this.props.velocity,o),this.setStateWhilePlaying({position:{top:t+n,left:e}})}if("up"===this.state.direction){var s=t;n=Math.min(this.props.velocity,s),this.setStateWhilePlaying({position:{top:t-n,left:e}})}n||this.changeDirection()}},{key:"killed",value:function(){this.setStateWhilePlaying({color:"white"}),clearInterval(this.moveInterval),clearInterval(this.changeDirectionInterval)}},{key:"setStateWhilePlaying",value:function(e){this.props.playing&&this.setState(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:this.state.color+" ghost",style:this.state.position},i.a.createElement(W,null))}}]),a}(i.a.Component);H.defaultProps={ghostSize:60,velocity:20,direction:"left"};var x=H,F=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={position:n.props.position,hidden:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"ate",value:function(){this.setState({hidden:!0})}},{key:"render",value:function(){return i.a.createElement("div",{className:"food"+(this.state.hidden?" hidden ":""),style:this.state.position},i.a.createElement("div",{className:"effective-food"}))}}]),a}(i.a.Component),K=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).pacmanRef=i.a.createRef(),n.scene=i.a.createRef(),n.ghostRefs=[],n.foodRefs=[];var o=Math.max(window.innerHeight,n.getSceneWidth());console.log(window.innerHeight),console.log(n.getSceneWidth()),n.noOfGhosts=Math.floor(o/140);for(var s=0;s<n.noOfGhosts;s++)n.ghostRefs.push(i.a.createRef());return n.noOfFoodColumns=0,n.noOfFoodRows=0,n.ghostColors=["red","invi","green","invi","blue","invi","orange"],n.directions=["left","up","right","down"],n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.crashed=!1,this.intervalCrash=setInterval(this.lookForCrash.bind(this),100),this.intervalFood=setTimeout(setInterval(this.lookForFood.bind(this),100),3e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalCrash),clearInterval(this.intervalFood)}},{key:"lookForCrash",value:function(){if(this.props.playing){var e=this.pacmanRef.current;for(var t in this.ghostRefs){var a=this.ghostRefs[t].current;if(this.isRectanglesColliding(e.state.position.left,e.state.position.top,e.props.pacmanSize,e.props.pacmanSize,a.state.position.left,a.state.position.top,a.props.ghostSize,a.props.ghostSize)&&(this.crashed=!0),this.crashed){this.props.gameOver(),e.killed(),a.killed(),clearInterval(this.intervalCrash);break}}}}},{key:"lookForFood",value:function(){if(this.props.playing){var e=this.pacmanRef.current;if(e)for(var t in this.foodRefs)for(var a in this.foodRefs[t]){var n=this.foodRefs[t][a].current;!n.state.hidden&&this.isRectanglesColliding(e.state.position.left,e.state.position.top,e.props.pacmanSize,e.props.pacmanSize,n.state.position.left+25,n.state.position.top+25,this.props.foodCollidingSize,this.props.foodCollidingSize)&&(n.ate(),this.props.increase(),this.props.points==this.noOfFoodColumns*this.noOfFoodRows&&this.props.win())}}}},{key:"isRectanglesColliding",value:function(e,t,a,n,i,o,s,r){return e+a>=i&&e<=i+s&&t+n>=o&&t<=o+r}},{key:"getSceneWidth",value:function(){return.6875*window.innerWidth}},{key:"render",value:function(){var e=[];this.noOfFoodColumns=Math.round(this.getSceneWidth()/this.props.foodSize),this.noOfFoodRows=Math.round(window.innerHeight/this.props.foodSize);for(var t=0;t<this.noOfFoodRows;t++){this.foodRefs.length<this.noOfFoodRows&&this.foodRefs.push([]);for(var a=0;a<this.noOfFoodColumns;a++){this.foodRefs[t].length<this.noOfFoodColumns&&this.foodRefs[t].push(i.a.createRef());var n={top:this.props.foodSize*t,left:this.props.foodSize*a};e.push(i.a.createElement(F,{ref:this.foodRefs[t][a],position:n,key:"".concat(t,"_").concat(a)}))}}var o=[];for(t=0;t<this.noOfGhosts;t++)o.push(i.a.createElement(x,{ref:this.ghostRefs[t],key:t,sceneWidth:this.getSceneWidth(),sceneHeight:window.innerHeight,playing:this.props.playing,position:{top:(t+1)*window.innerHeight/(this.noOfGhosts+1),left:(t+1)*this.getSceneWidth()/(this.noOfGhosts+1)},color:this.ghostColors[t],direction:this.directions[Math.floor(4*Math.random())]}));return i.a.createElement("div",{className:"column eleven wide",style:{paddingLeft:0,paddingBottom:0}},i.a.createElement("div",{className:"scene",ref:this.scene},e,i.a.createElement(j,{ref:this.pacmanRef,sceneWidth:this.getSceneWidth(),sceneHeight:window.innerHeight,playing:this.props.playing,position:{top:200,left:0},direction:this.props.direction,randomDirection:this.props.randomDirection}),o))}}]),a}(i.a.Component);K.defaultProps={foodSize:60,foodCollidingSize:10};var B=K,T=a(15),G=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this))}},{key:"changeDirection",value:function(e){this.props.changeDirection(e)}},{key:"onKeyDown",value:function(e){this.rotate(e.keyCode)}},{key:"rotate",value:function(e){var t=this.props.direction;37===e?t="left":38===e?t="up":39===e?t="right":40===e&&(t="down"),this.props.changeDirection(t)}},{key:"randomDirection",value:function(){var e=["left","up","right","down"][Math.floor(4*Math.random())];this.changeDirection(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"controller"},i.a.createElement(T.a,{className:"icon-left key",onClick:function(){return e.changeDirection("left")}}),i.a.createElement(T.c,{className:"icon-right key",onClick:function(){return e.changeDirection("right")}}),i.a.createElement(T.d,{className:"icon-up key",onClick:function(){return e.changeDirection("up")}}),i.a.createElement(T.b,{className:"icon-down key",onClick:function(){return e.changeDirection("down")}}))}}]),a}(i.a.Component),L=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"getGameResult",value:function(){return this.props.lost?i.a.createElement("h1",{className:"lost"},"Game Over"):i.a.createElement("h1",{className:"won"},"You Won!")}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"winLoseModal",className:"modal-content "+(this.props.finished?" ":" hide ")},this.getGameResult(),i.a.createElement("h3",{className:"ui header"},"Score: ",i.a.createElement("b",{style:{color:"red",fontSize:"20pt"}},this.props.score)),i.a.createElement("div",{className:"modal-actions"},i.a.createElement("button",{className:"ui button primary play-again-btn",onClick:this.props.playAgain},"Improve your score!"))),i.a.createElement("div",{className:"modal-overlay"+(this.props.finished?" ":" hide ")}))}}]),a}(i.a.Component);L.defaultProps={lost:!1,finished:!1};var A=L,V=a(27),_=a(39),J=a.n(_),U=function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onPlayerChanged=function(){var e=J.a.database().ref("players");e.on("child_added",(function(e){var t=n.state.players;t.push(Object.assign({},e.val(),{key:e.key}));var a=n.getScoreboardData(t);n.setState({players:Object(V.a)(t),tops:a})})),e.on("child_changed",(function(e){var t=n.state.players;t.forEach((function(t){t.key===e.key&&(t.score=e.val().score,t.date=e.val().date,t.won=e.val().won)}));var a=n.getScoreboardData(t);n.setState({players:Object(V.a)(t),tops:a})}))},n.getScoreboardData=function(e){e.sort(n.compare);var t=e.slice(0,5).map((function(e,t){return Object.assign({},e,{rank:t+1})})),a=t.filter((function(e){return e.key===n.props.playerKey})).length;if(n.props.playerKey&&!a){var i=-1,o=e.filter((function(e,t){if(e.key===n.props.playerKey)return i=t+1,!0}))[0];i>4&&t.push({key:"dummy1",name:"...",rank:""}),t.push(Object.assign({},o,{rank:i})),e.length>i&&(e.length>i+1&&t.push({key:"dummy2",name:"...",rank:""}),t.push(Object.assign({},e[e.length-1],{rank:e.length})))}else 6==e.length?t.push(Object.assign({},e[e.length-1],{rank:e.length})):e.length>6&&(t.push({key:"dummy1",name:"...",rank:""}),t.push(Object.assign({},e[e.length-1],{rank:e.length})));return t},n.componentDidMount=function(){n.onPlayerChanged()},n.state={players:[],tops:[]},n}return Object(l.a)(a,[{key:"compare",value:function(e,t){return!e.score||e.score<t.score?1:!t.score||e.score>t.score?-1:0}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"score-board"},i.a.createElement("table",{className:"ui small table striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Rank"),i.a.createElement("th",null,"Player"),i.a.createElement("th",{className:"center aligned"},"Score"),i.a.createElement("th",null,"Date"))),i.a.createElement("tbody",null,this.state.tops.map((function(t,a){return i.a.createElement("tr",{key:t.key,className:e.props.playerKey===t.key?"positive":""},i.a.createElement("td",{className:"collapsing"},t.rank),i.a.createElement("td",null,t.name),i.a.createElement("td",{className:"center aligned"},t.score),i.a.createElement("td",null,t.date))})))))}}]),a}(i.a.Component);U.defaultProps={display:!1};var Y=U,Q=(a(143),function(e){Object(h.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).gameOver=function(){n.state.finished||(n.setState({finished:!0,lost:!0}),u.a.database().ref("players/"+n.state.playerKey).update({score:n.state.points,won:!1,date:(new Date).toLocaleString()}))},u.a.apps.length||u.a.initializeApp(m),n.headerRef=i.a.createRef(),n.sceneRef=i.a.createRef(),n.controllerRef=i.a.createRef(),n.baseState={gameKey:1e6*Math.random(),showingRegister:!0,showingHelp:!1,showingScore:!1,direction:"right",finished:!1,lost:!1,points:0},n.fullBaseState=Object.assign({},n.baseState,{playerKey:"",playerName:""}),n.state=n.fullBaseState,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"increaseValue",value:function(){var e=this.state.points+1;this.setState({points:e})}},{key:"win",value:function(){this.setState({finished:!0,lost:!1})}},{key:"showHideHelp",value:function(e){this.setState({showingHelp:!e})}},{key:"changeDirection",value:function(e){this.setState({direction:e})}},{key:"playAgain",value:function(e){if(this.state.playerKey)this.setState(this.baseState),this.setState({gameKey:1e6*Math.random()}),this.setState({showingRegister:!1});else{var t=u.a.database().ref("/players").push({name:e.playerName,secret:e.secret}).key;this.setState(this.baseState),this.setState({gameKey:1e6*Math.random()}),this.setState({playerKey:t}),this.setState({playerName:e.playerName}),this.setState({showingRegister:!1})}}},{key:"randomDirection",value:function(){this.controllerRef.current.randomDirection()}},{key:"render",value:function(){return i.a.createElement("div",{className:"ui two column stackable grid pacman-app",key:this.state.gameKey},i.a.createElement(y,{startGame:this.playAgain.bind(this),display:this.state.showingRegister}),i.a.createElement(E,{ref:this.headerRef,points:this.state.points,playing:!this.state.showingHelp,showHideHelp:this.showHideHelp.bind(this)},i.a.createElement(Y,{playerKey:this.state.playerKey,playerName:this.state.playerName})),i.a.createElement(B,{ref:this.sceneRef,playing:!this.state.showingRegister&&!this.state.finished,direction:this.state.direction,points:this.state.points,gameOver:this.gameOver.bind(this),win:this.win.bind(this),increase:this.increaseValue.bind(this),randomDirection:this.randomDirection.bind(this)}),i.a.createElement(G,{ref:this.controllerRef,changeDirection:this.changeDirection.bind(this)}),i.a.createElement(A,{score:this.state.points,lost:this.state.lost,finished:this.state.finished,playAgain:this.playAgain.bind(this)}))}}]),a}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,a){e.exports=a(144)},45:function(e,t,a){}},[[40,1,2]]]);
//# sourceMappingURL=main.0168d0e6.chunk.js.map